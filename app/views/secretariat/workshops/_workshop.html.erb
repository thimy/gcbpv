<div id="<%= dom_id workshop %>" class="record">
  <h1><%= workshop.name %></h1>
  <section data-controller="tabs">
    <header>
      <button data-tabs-target="tab" data-action="tabs#click" data-tabs-panel-value="atelier">Atelier</button>
      <button data-tabs-target="tab" data-action="tabs#click" data-tabs-panel-value="infos" data-button-type="outline">Informations de l’atelier</button>
    </header>
    <div data-tabs-target="panel" id="atelier">
      <% workshop.workshop_slots.each do |slot| %>
        <h3><%= "#{slot.city.name} – #{slot.day_of_week} avec #{slot.teacher_names}" %></h3>
        <%= render Shared::Table::Component.new do |table| %>
          <% table.with_header do |header| %>
            <% header.with_column(name: "student") do %>Élève<% end %>
            <% header.with_column(name: "phone") do %>Téléphone<% end %>
            <% header.with_column(name: "email") do %>Email<% end %>
          <% end %>
          <% slot.subscriptions.each do |subscription| %>
            <% table.with_row do |row| %>
              <% row.with_cell(name: "student") do %><%= link_to subscription.student.name, secretariat_subscription_path(subscription) %><% end %>
              <% row.with_cell(name: "phone") do %><%= subscription.phone %><% end %>
              <% row.with_cell(name: "email") do %><%= subscription.email %><% end %>
            <% end %>
          <% end %>
        <% end %>
      <% end %>
    </div>
    <div data-tabs-target="panel" id="infos">
      <h2>Informations de la discipline</h2>
      <dl>
        <dt>Name:</dt>
        <dd><%= workshop.name %></dd>
        <dt>Description:</dt>
        <dd><%= simple_format(workshop.description) %></dd>
      </dl>
    </div>
  </section>
</div>
